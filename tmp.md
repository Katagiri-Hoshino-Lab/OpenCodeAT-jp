# 🔨ToDo - GitHub Issue #2 進捗管理

## 🔧 優先事項

### tmuxとセッション管理
- [x] tmux_demo1プロジェクトの.shや.mdの修正を、このOpenCodeAT-jpリポジトリに反映
- [x] tmux sessionは複数使用する仕様に変更（pm_sessionとopencodeatの2セッション構成実装済み）
  - ✅ PMエージェント専用の`pm_session`を分離
  - ✅ その他のエージェント用の`opencodeat`セッション
  - ⚠️ 12以上のエージェント時のさらなるセッション分割は未実装
- [x] エージェントの推奨分割数を6~12に修正（それ以上は1920x1280pでtmux no space for new paneが発生）
  - ✅ README.mdに記載済み
  - ✅ setup.shのヘルプメッセージに反映済み

### エージェント管理
- [x] `start_all_claude.sh`を廃止。`setup.sh`内での各エージェント数の算出も廃止。
  - ✅ ファイル削除完了
  - ✅ setup.shはコマンドライン引数でエージェント数を受け取る方式に変更
- [x] pane IDとエージェント名の対応表`agent_and_pane_id_table.txt`を作成し、PMが適切なID付き（例：PG1.2.3）で起動させる
  - ✅ setup.sh内で自動生成機能実装済み
  - ✅ グループベースの命名規則（CI1.1, PG1.1.1等）実装済み
  - ✅ agent-send.shが対応表を読み込んで動的にメッセージ送信
  - ✅ agent_and_pane_id_table_example.txtの作成完了（大規模構成例も含む）
- [x] `setup.sh`のコマンドライン引数としてエージェント数を渡すことをREADME.mdに追記
  - ✅ コマンドラインオプションの詳細説明追加済み
  - ✅ 推奨構成例も記載済み

### ディレクトリとMCP設定
- [ ] PMがmapの意味をtmux通信の宛先のマッピング誤解してディレクトリ階層を作成しない問題
- [ ] mcpをセットしてから!cdさせる OR 必要に応じてディレクトリ上でmcpをセット
- [ ] wcgwサーバをadd→exit→(/mcpで起動確認)→claudeで準備させる
  ※ wcgwはなくてもSSHは可能だが
  - 画面上に大量のssh ユーザ名@ホスト名が映る
  - ２段階認証突破できない
  - ファイルの転送で困る

### セキュリティ設定
- [x] `--dangerously-skip-permissions`を追記
  - ✅ CLAUDE.mdに必須オプションとして記載
  - ✅ README.mdのPM起動手順に追記
  ※`rm -rf`などを禁止しないリスクを許容する設計
  - 基本削除不要
  - 📁階層化
  - GitHubのコピー

## 🎯 オプション機能

- [ ] PMがtmux全体を見れるようにスクショを撮るmcpサーバを追加
- [x] 対応表を読み取って、エージェントの1つのpane。あるいは別window・sessionでユーザに表示
  - ✅ STATUSペインを左上に追加（状態表示用）
  - ⚠️ 完全な2D配置表示は未実装
- [ ] CDエージェントのGitHub/にfork→プルリクを行う挙動も言及
- [ ] 予算に複数の目安を設定：`最低消費すべき量 | 想定 | デッドライン` 例：1000 | 2500 | 10000 ポイント
- [ ] -p {クエリ} というclaudeサブエージェントの使い方をClaude.mdに追加

## 📝 実装済み機能の補足

### 2セッション構成の詳細
- `pm_session`: PMエージェント専用（ユーザとの対話用）
- `opencodeat`: SE, CI, PG, CDエージェント用
- 各セッションは独立したターミナルタブでアタッチ可能

### グループベースのエージェント命名
- CI1.1, CI1.2: CIエージェントのグループ分け
- PG1.1.1, PG1.1.2: CI1.1に対応するPGエージェント
- PG1.2.1, PG1.2.2: CI1.2に対応するPGエージェント
- 色分け機能でグループの視覚的識別が可能

### 状態表示機能
- opencodeatセッションの左上にSTATUSペイン配置
- 将来的にエージェント配置の2D表示を実装予定

## ⚠️ 未対応・課題

1. **12以上のエージェント対応**: さらなるセッション分割の実装が必要
2. **ディレクトリ階層の自動作成**: PMの理解を促す説明の追加が必要
3. **MCP設定の自動化**: wcgwサーバのセットアップ手順の文書化が必要

## 🔍 整合性確認で発見された改善点

1. **大規模構成の文書化**: README.mdに24エージェント以上での`opencodeat2`セッション使用について記載が必要
2. **STATUSペインの説明**: README.mdにSTATUSペインの説明を追加する必要あり
3. **CI命名規則の統一**: 単一CIの場合も`CI1.1`形式に統一（現在は`CI1`と`CI1.1`が混在）
4. **エージェント数の最大値**: README.mdに最大20エージェントまで可能であることを明記

## 🚀 次のステップ

1. README.mdの改善（整合性確認で発見された点の修正）
2. 12以上のエージェント対応の実装（必要に応じて）
3. MCP設定に関するドキュメントの拡充
4. 予算管理機能の実装
5. ディレクトリ階層作成に関するPM.mdの説明強化